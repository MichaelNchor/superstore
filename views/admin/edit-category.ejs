<%- include("../admin/topbar") %>
 
<div class="container-fluid" style="background: #f8fafc; min-height: 100vh; padding: 2rem 0;">   
  <div class="row px-xl-5 pb-3">  
                  
    <div class="col-sm-12">
      <a class="btn-modern btn-modern-secondary" href="/admin/categories" style="margin-bottom: 1.5rem; display: inline-flex; align-items: center;">
        <i class="fas fa-arrow-left" style="margin-right: 0.5rem;"></i>
        Back to Categories
      </a>

      <div class="admin-header-modern" style="background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
        <h2 style="color: white; margin: 0; font-size: 1.75rem; font-weight: 600; display: flex; align-items: center;">
          <i class="fas fa-edit" style="margin-right: 0.75rem;"></i>
          Edit Category
        </h2>
        <p style="color: rgba(255,255,255,0.9); margin: 0.5rem 0 0 0; font-size: 0.95rem;">Update category information</p>
      </div>

      <%- include('../messages/adminMessages') %>

      <div class="card-modern" style="background: white; border-radius: 12px; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); padding: 2rem;">      
        <form method="post" action="/admin/categories/edit-category/<%= id %>"  enctype="multipart/form-data">

            <!-- Name input -->
            <div class="form-group-modern" style="margin-bottom: 1.5rem;">
              <label class="form-label-modern" for="title" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-tag" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Category Title
              </label>            
              <input type="text" id="form4Example1" class="form-control-modern" name="title" placeholder="Enter category title" value="<%= title %>" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;" required/>
            </div>

            <!-- Current image -->
            <div class="form-group-modern" style="margin-bottom: 1.5rem;">
              <label class="form-label-modern" for="image" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-image" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Current Image
              </label>            
              <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; text-align: center;">
                <% if (image == "") { %>
                  <img id="noimage" src="/images/noimage.png" alt="" style="max-width: 200px; border-radius: 8px; border: 2px solid #e5e7eb;">
                <% } else {%>
                  <img id="noimage" src="/category_images/<%= id %>/<%= image %>" alt="" style="max-width: 200px; border-radius: 8px; border: 2px solid #e5e7eb;">
                <% } %>
              </div>
            </div>        

            <!-- Upload new image -->
            <div class="form-group-modern" style="margin-bottom: 2rem;">
              <label class="form-label-modern" for="image" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-upload" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Upload New Image
              </label>            
              <input type="file" class="form-control-modern" name="image" id="img" accept="image/*" style="width: 100%; padding: 0.75rem 1rem; border: 2px dashed #cbd5e1; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease; background: #f8fafc;"/>
              <div style="margin-top: 1rem; padding: 1rem; background: #f8fafc; border-radius: 8px; text-align: center;">
                <img src="/images/noimage.png" id="imgPreview" style="max-width: 200px; border-radius: 8px; border: 2px solid #e5e7eb; display: none;">
              </div>
            </div>
            
            <!-- Submit button -->
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
              <a href="/admin/categories" class="btn-modern btn-modern-secondary">
                <i class="fas fa-times"></i>
                Cancel
              </a>
              <button type="submit" class="btn-modern btn-modern-primary">
                <i class="fas fa-save"></i>
                Update Category
              </button>
            </div>
          </form>
      </div>
    </div>
    <script>
    
      //preview image
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                
                reader.onload = function(e) {
                    $("#imgPreview").attr('src', e.target.result).width(100).height(100);
                }
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        $("#img").change(function() {
            readURL(this);
        });
      </script>
<%- include("../admin/footer") %>