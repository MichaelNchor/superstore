<%- include("../admin/topbar") %>
 
<div class="container-fluid" style="background: #f8fafc; min-height: 100vh; padding: 2rem 0;">   
  <div class="row px-xl-5 pb-3">  
                  
    <div class="col-sm-12">
      <a class="btn-modern btn-modern-secondary" href="/admin/products" style="margin-bottom: 1.5rem; display: inline-flex; align-items: center;">
        <i class="fas fa-arrow-left" style="margin-right: 0.5rem;"></i>
        Back to Products
      </a>

      <div class="admin-header-modern" style="background: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">
        <h2 style="color: white; margin: 0; font-size: 1.75rem; font-weight: 600; display: flex; align-items: center;">
          <i class="fas fa-plus-circle" style="margin-right: 0.75rem;"></i>
          Add New Product
        </h2>
        <p style="color: rgba(255,255,255,0.9); margin: 0.5rem 0 0 0; font-size: 0.95rem;">Create a new product listing</p>
      </div>

      <%- include('../messages/adminMessages') %>

      <div class="card-modern" style="background: white; border-radius: 12px; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1); padding: 2rem;">      
        <form method="post" action="/admin/products/add-product" enctype="multipart/form-data">

            <!-- Name input -->
            <div class="form-group-modern" style="margin-bottom: 1.5rem;">
              <label class="form-label-modern" for="title" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-box" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Product Title
              </label>            
              <input type="text" id="form4Example1" class="form-control-modern" name="title" placeholder="Enter product title" value="<%= title %>" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;" required/>
            </div>

            <!-- Short Description input -->
            <div class="form-group-modern" style="margin-bottom: 1.5rem;">
              <label class="form-label-modern" for="desc_short" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-align-left" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Short Description
              </label>
              <input type="text" id="form4Example7" class="form-control-modern" name="desc_short" placeholder="Brief product description" value="<%= desc_short %>" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;"/>
            </div> 

            <!-- Description input -->
            <div class="form-group-modern" style="margin-bottom: 1.5rem;">
              <label class="form-label-modern" for="desc" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-file-alt" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Full Description
              </label>
              <textarea name="desc" class="form-control-modern" id="ta" rows="4" placeholder="Detailed product description" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;"><%= desc %></textarea>
            </div>        

            <div class="row">
              <div class="col-md-6">
                <!-- price input -->
                <div class="form-group-modern" style="margin-bottom: 1.5rem;">
                  <label class="form-label-modern" for="price" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                    <i class="fas fa-dollar-sign" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                    Price
                  </label>            
                  <input type="text" id="form4Example2" class="form-control-modern" name="price" placeholder="0.00" value="<%= price %>" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;"/>
                </div>
              </div>

              <div class="col-md-6">
                <!-- discount input -->
                <div class="form-group-modern" style="margin-bottom: 1.5rem;">
                  <label class="form-label-modern" for="discount" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                    <i class="fas fa-percent" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                    Discount (%)
                  </label>         
                  <input type="number" id="form4Example99" class="form-control-modern" name="discount" placeholder="0" value="<%= discount %>" min="0" max="100" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;"/>
                </div>
              </div>
            </div>

            <!-- category input -->
            <div class="form-group-modern" style="margin-bottom: 1.5rem;">
              <label class="form-label-modern" for="s" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-tag" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Category
              </label>            
              <select name="category" class="form-control-modern" style="width: 100%; padding: 0.75rem 1rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease;">
                <% categories.forEach(function(category) { %>
                  <option value="<%= category.slug %>"><%= category.title %></option>
                <% }); %>
              </select>
            </div>

            <!-- image input -->
            <div class="form-group-modern" style="margin-bottom: 2rem;">
              <label class="form-label-modern" for="image" style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #1e293b;">
                <i class="fas fa-image" style="margin-right: 0.5rem; color: #8b5cf6;"></i>
                Product Image
              </label>            
              <input type="file" class="form-control-modern" name="image" id="img" accept="image/*" style="width: 100%; padding: 0.75rem 1rem; border: 2px dashed #cbd5e1; border-radius: 8px; font-size: 1rem; transition: all 0.3s ease; background: #f8fafc;"/>
              <div style="margin-top: 1rem; padding: 1rem; background: #f8fafc; border-radius: 8px; text-align: center;">
                <img src="/images/noimage.png" id="imgPreview" style="max-width: 200px; border-radius: 8px; border: 2px solid #e5e7eb;">
              </div>
            </div>        
            
            <!-- Submit button -->
            <div style="display: flex; gap: 1rem; justify-content: flex-end;">
              <a href="/admin/products" class="btn-modern btn-modern-secondary">
                <i class="fas fa-times"></i>
                Cancel
              </a>
              <button type="submit" class="btn-modern btn-modern-primary">
                <i class="fas fa-save"></i>
                Create Product
              </button>
            </div>
          </form>
      </div>
    </div>

    <script>
    
      function readURL(input) {
          if (input.files && input.files[0]) {
              var reader = new FileReader();
              
              reader.onload = function(e) {
                  $("#imgPreview").attr('src', e.target.result).width(100).height(100);
              }
              
              reader.readAsDataURL(input.files[0]);
          }
      }
      
      $("#img").change(function() {
          readURL(this);
      });
      
  </script>    

<%- include("../admin/footer") %>