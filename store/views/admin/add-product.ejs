<%- include("../admin/topbar") %>
 
<div class="container-fluid">   
  <div class="row px-xl-5 pb-3">  
                  
    <div class="col-sm-12">
    <a class="btn btn-primary" href="/admin/products" role="button"><i class="fas fa-angle-double-left"></i>back</a>
    <hr>      
    <h4 class="mb-3 mt-3">Add Product</h4>
    <%- include('../messages/adminMessages') %>      
    <form method="post" action="/admin/products/add-product" enctype="multipart/form-data">

        <!-- Name input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="title">Title </label>            
          <input type="text" id="form4Example1" class="form-control" name="title" placeholder="title" value="<%= title %>"/>
        </div>

        <!-- Short Description input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="desc_short">Short Description</label>
          <input type="text" id="form4Example7" class="form-control" name="desc_short" placeholder="desc_short" value="<%= desc_short %>"/>
        </div> 

        <!-- Description input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="desc">Content</label>
          <textarea name="desc" class="form-control" id="ta" rows="4" placeholder="description"><%= desc %></textarea>
        </div>        

        <!-- price input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="price">Price</label>            
          <input type="text" id="form4Example2" class="form-control" name="price" placeholder="price" value="<%= price %>"/>
        </div>

        <!-- discount input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="discount">Discount (%)</label>         
          <input type="number" id="form4Example99" class="form-control" name="discount" placeholder="discount" value="<%= discount %>" min="0" max="100"/>
        </div>

        <!-- category input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="s">Category</label>            
          <select name="category" class="form-control">
          <% categories.forEach(function(category) { %>
            <option value="<%= category.slug %>"><%= category.title %></option>
          <% }); %>
        </select>
        </div>

        <!-- image input -->
        <div class="form-outline mb-4">
          <label class="form-label" for="image">Image</label>            
          <input type="file" class="form-control" name="image" placeholder="upload image" id="img"/>
          <img src="/images/noimage.png" id="imgPreview">
        </div>        
        
        <!-- Submit button -->
        <button type="submit" class="btn btn-primary mb-4">Submit</button>
      </form>
    </div>

    <script>
    
      function readURL(input) {
          if (input.files && input.files[0]) {
              var reader = new FileReader();
              
              reader.onload = function(e) {
                  $("#imgPreview").attr('src', e.target.result).width(100).height(100);
              }
              
              reader.readAsDataURL(input.files[0]);
          }
      }
      
      $("#img").change(function() {
          readURL(this);
      });
      
  </script>    

<%- include("../admin/footer") %>